{% extends "index_template.html" %}

{% import "macros/input_macros.html" as im %}

{% block title%} Home {% endblock%}

{% block main %}
<div class ="home_page">
	<div class ="row">
		<div class ="col">
		</div>
		<div class="col-7">

			<div class="container scroll">
				{% for post in posts %}
					{% if post.image_file == "default.jpg" %}
						{{ im.postCard(
							title=post.title, 
							post = post.content,
							date = post.date_created )
						}}
					{% else %}
						{{ im.postCardImage(
							title=post.title,
							post = post.content,
							image = url_for('static', filename="img/posts/" ~ post.image_file),
							date = post.date_created )
						}}
					{% endif %}
				{% endfor %}
			</div>
		</div>

		<div class ="col" >
			{% if current_user.is_authenticated %}
			<!-- Button trigger modal -->
			<button type="button" id="addPost" class="w3-button w3-xlarge w3-circle w3-teal" data-toggle="modal" data-target="#postModal">+</button>
			{% endif %}

			<div id="postModal" class="modal fade">
				<div class="modal-dialog modal-dialog-centered">
				  <div class="modal-content">

					<form action="{{ url_for('index') }}" method="POST" enctype="multipart/form-data">
						{{ form.csrf_token }}
					<div class="modal-header">
						<h5 class="modal-title"> Post </h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						  <span aria-hidden="true">&times;</span>
						</button>
					  </div>
					
					<div class="modal-body">
						<div class="form-group"> {{ form.title.label }} {{ form.title(class ="form-control")}} </div>
						<div class="form-group"> {{ form.content.label }} {{ form.content(class ="form-control") }}</div>
						<div class="form-group"> <p>Upload Image</p>{{ form.img() }}</div>
					</div>
					
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						<button type="submit" class="btn btn-primary">Post</button>
					</div>
					</form>
					
				  </div>
				</div>
			  </div>
		</div>
	</div>
</div>

{% endblock %}